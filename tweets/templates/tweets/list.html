{% extends 'tweets/base.html' %}
{% load humanize %}
{% load static %}

{% block title%}Home{% endblock %}


{% block content %}
    <div class="mb-4">
        {% include 'tweets/tweets.html' %}
    </div>
{% endblock %}  

{% block scripts %}
{{block.super}}
    <script>
        let like = (id) => {
            let btn = $(`a[value=${id}]`)
            $.ajax({
                "url":"/like/",
                "type":"POST",
                "data":{
                    "id":parseInt(id),
                    "csrfmiddlewaretoken":"{{csrf_token}}"
                },
                "dataType":"json",
                "success":(res) => {
                    $(btn).html(res["has_liked"] ? "<i class='far fa-heart d-inline-block mx-2'></i>" + res['count'] : "<i class='fas fa-heart d-inline-block mx-2'></i>" + res["count"])
                    
                }
            })
        }
        
    </script>
{% endblock %}